# 🔥 热重载功能说明

## ✨ 功能说明

现在项目已支持**热重载**功能，修改代码后**无需手动重启服务器**，系统会自动检测文件变化并重启。

## 🚀 使用方法

### 方式一：使用开发模式启动脚本（推荐）

**双击运行**: `开发模式.bat`

这个脚本会：
- 自动检查并安装 nodemon（如果未安装）
- 使用 nodemon 启动服务器
- 监听所有相关文件的变化

### 方式二：使用命令行

```bash
npm run dev
```

## 📁 监听的文件类型

系统会自动监听以下文件的变化：

- ✅ `server.js` - 服务器入口
- ✅ `app-config.js` - 配置文件
- ✅ `core/**/*.js` - 核心引擎文件
- ✅ `modules/**/*.js` - 所有模块文件
- ✅ `public/**/*.css` - 样式文件
- ✅ `public/**/*.js` - JavaScript 文件

## 🔄 工作流程

1. **启动开发模式** → 运行 `开发模式.bat`
2. **修改文件** → 编辑任何被监听的文件
3. **自动重启** → nodemon 检测到变化，自动重启服务器
4. **刷新浏览器** → 按 `F5` 或 `Ctrl+R` 查看效果

## ⚡ 快速对比

| 模式 | 启动方式 | 修改后需要 | 适用场景 |
|------|---------|-----------|---------|
| **普通模式** | `启动.bat` | 手动重启服务器 | 生产环境、测试 |
| **开发模式** | `开发模式.bat` | 自动重启 | 开发、调试 |

## 📝 注意事项

1. **CSS/JS 文件修改**：
   - 服务器会自动重启
   - 浏览器需要手动刷新（`F5` 或 `Ctrl+R`）
   - 建议使用硬刷新（`Ctrl+F5`）清除缓存

2. **配置文件修改**：
   - `app-config.js` 修改后会自动重启
   - 菜单、主题等配置立即生效

3. **模块文件修改**：
   - `modules/**/*.js` 修改后会自动重启
   - 页面内容立即更新

4. **停止服务器**：
   - 在命令行窗口按 `Ctrl+C`
   - 或直接关闭窗口

## 🎯 推荐工作流程

### 开发时：
1. 运行 `开发模式.bat` 启动服务器
2. 打开浏览器访问 `http://localhost:3000`
3. 修改代码文件
4. 保存文件（`Ctrl+S`）
5. 等待 1-2 秒（nodemon 自动重启）
6. 在浏览器中刷新页面（`F5`）查看效果

### 生产部署时：
1. 运行 `启动.bat` 使用普通模式
2. 性能更好，无文件监听开销

## 🔧 高级配置

如果需要调整监听设置，可以编辑 `nodemon.json`：

```json
{
  "watch": [
    "server.js",
    "app-config.js",
    "core/**/*.js",
    "modules/**/*.js",
    "public/**/*.css",
    "public/**/*.js"
  ],
  "ext": "js,json,css",
  "delay": 500  // 延迟 500ms 后重启（避免频繁重启）
}
```

## ❓ 常见问题

**Q: 修改后没有自动重启？**
- 检查是否使用了 `开发模式.bat` 启动
- 确认修改的文件在被监听列表中
- 查看命令行是否有错误信息

**Q: 重启太频繁？**
- 编辑 `nodemon.json`，增加 `delay` 值（如 1000ms）

**Q: 不想监听某些文件？**
- 在 `nodemon.json` 的 `ignore` 数组中添加路径

**Q: CSS 修改后浏览器没变化？**
- 使用硬刷新（`Ctrl+F5`）清除缓存
- 检查浏览器开发者工具中的网络请求

---

**提示**: 开发时建议一直使用 `开发模式.bat`，可以大大提高开发效率！

